function renderTree(arr, curr, openState) {
  let html = `<table style="width:100%; border-collapse:collapse;" class="tree-table">
    <thead>
      <tr style="background:#e1ebf7;">
        <th style="padding:6px; border:1px solid #ccc;">தசை</th>
        <th style="padding:6px; border:1px solid #ccc;">புக்தி</th>
        <th style="padding:6px; border:1px solid #ccc;">அந்தரம்</th>
        <th style="padding:6px; border:1px solid #ccc;">நாள்கள்</th>
      </tr>
    </thead>
    <tbody>
  `;

  arr.forEach((md, mdi) => {
    md.puthis.forEach((pt, pti) => {
      pt.antharas.forEach((at, ati) => {
        const isCurrent = curr.dasa === mdi && curr.puthi === pti && curr.anth === ati;
        const rowStyle = isCurrent ? "background:#cbe2ff;" : "";
        html += `<tr style="${rowStyle}">
          <td style="padding:5px;border:1px solid #ccc;"><b>${md.lord}</b><br><span style="font-size:90%;">${md.nak}</span></td>
          <td style="padding:5px;border:1px solid #ccc;"><b>${pt.lord}</b><br><span style="font-size:90%;">${pt.nak}</span></td>
          <td style="padding:5px;border:1px solid #ccc;"><b>${at.lord}</b><br><span style="font-size:90%;">${at.nak}</span></td>
          <td style="padding:5px;border:1px solid #ccc;font-size:90%;">${formatDate(at.start)}<br>➝<br>${formatDate(at.end)}</td>
        </tr>`;
      });
    });
  });

  html += `</tbody></table>`;
  document.getElementById('dasatree').innerHTML = html;
}
